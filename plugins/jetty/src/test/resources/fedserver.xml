<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure.dtd">
 
<Configure id="FileServer" class="org.eclipse.jetty.server.Server">
 
	<Call class="org.eclipse.jetty.util.log.Log" name="getRootLogger">
	  <Call name="setDebugEnabled">
	    <Arg type="boolean">true</Arg>
	  </Call>
	</Call>

    <Call name="addConnector">
      <Arg>
          <New class="org.eclipse.jetty.server.nio.SelectChannelConnector">
            <Set name="port">8080</Set>
          </New>
      </Arg>
    </Call>
 
    <Set name="handler">
      <New class="org.eclipse.jetty.server.handler.HandlerList">
        <Set name="handlers">
		  <Array type="org.eclipse.jetty.server.Handler">
		    <Item>
		      <New class="org.eclipse.jetty.webapp.WebAppContext">
	            <Set name="contextPath">/fedizhelloworld</Set>
	            <Set name="war">./target/test-classes/fedizhelloworld.war</Set>
	            <Set name="throwUnavailableOnStartupException">true</Set>
	             
	            <Get name="securityHandler">
	              <Set name="authenticator">
	                <New class="org.apache.cxf.fediz.jetty.FederationAuthenticator">
	                  <Set name="configFile">./target/test-classes/fediz_config.xml</Set>
	                </New>
	              </Set>
	            </Get>
	          </New>
		    </Item>
		  </Array>
        </Set>
      </New>
    </Set>
    
    <Call name="addBean">
      <Arg>
        <New class="org.apache.cxf.fediz.jetty.FederationLoginService">
          <Set name="name">WSFED</Set>
        </New>
      </Arg>
    </Call>      
    
</Configure>